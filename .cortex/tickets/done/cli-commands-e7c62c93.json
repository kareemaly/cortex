{
  "id": "e7c62c93-4730-4087-944b-5ba70d2576f7",
  "title": "CLI Commands",
  "body": "Implement CLI commands that communicate with the daemon HTTP API.\n\n## Context\n\nThe CLI has command stubs that print \"not implemented yet\". The daemon API now has working endpoints for tickets. Wire them together.\n\nSee `DESIGN.md` for:\n- CLI commands (lines 44-53)\n- Expected behavior for each command\n\nExisting code:\n- `cmd/cortex/commands/` - Cobra command stubs\n- `internal/cli/sdk/client.go` - HTTP client with Health() method\n\n## Requirements\n\n1. **Extend SDK Client** (`internal/cli/sdk/`)\n   - `ListTickets(status)` - GET /tickets or /tickets/{status}\n   - `GetTicket(id)` - GET /tickets/{status}/{id}\n   - `CreateTicket(title, body)` - POST /tickets\n   - `SpawnSession(id)` - POST /tickets/{status}/{id}/spawn\n   - `KillSession(id)` - DELETE /sessions/{id}\n\n2. **Implement list Command**\n   - `cortex list` - show all tickets grouped by status\n   - `cortex list --status=backlog` - filter by status\n   - Format output nicely (table or simple list)\n\n3. **Implement spawn Command**\n   - `cortex spawn <ticket-id>` - spawn agent for ticket\n   - Show session info after spawning\n   - Error if ticket not found or already has active session\n\n4. **Implement session Command**\n   - `cortex session <id>` - show session details\n   - Display ticket info, session status, report if any\n   - For now, text output (TUI is separate ticket)\n\n5. **Update version Command**\n   - Already works, but ensure it shows daemon version too\n   - Call health endpoint to get daemon version\n\n## Verification\n\n```bash\nmake build   # Builds successfully\nmake test    # Tests pass\nmake lint    # No lint errors\n\n# Manual test (daemon must be running)\ncortexd &\ncortex list\ncortex spawn <some-ticket-id>\ncortex session <session-id>\n```\n\n## Notes\n\n- Commands should error gracefully if daemon not running\n- Consider adding --json flag for machine-readable output\n- Keep output concise for terminal use\n- architect, kanban, install commands remain stubs (separate tickets)\n\n## Implementation\n\n### Commits\n- `4f6bc2f` feat: implement CLI commands with daemon API integration\n\n### Key Files Changed\n- `internal/cli/sdk/client.go` - Added response types and client methods for all daemon API operations\n- `cmd/cortex/commands/list.go` - List tickets grouped by status with `--status` and `--json` flags\n- `cmd/cortex/commands/session.go` - Display session details with `--json` flag\n- `cmd/cortex/commands/spawn.go` - Spawn session for ticket with `--json` flag\n- `cmd/cortex/commands/version.go` - Show daemon version alongside CLI version\n\n### Decisions\n- Added `--json` flag to list, session, and spawn commands for machine-readable output\n- SDK client supports short ID prefix matching (e.g., `abc123` matches `abc123-full-uuid`)\n- `FindTicketByID` and `FindSession` search across all statuses to locate items by ID\n- Version command gracefully shows \"daemon: not running\" when daemon unavailable\n- Spawn command will return \"not implemented\" error until daemon handler is completed\n\n### Scope\n- All requirements implemented as specified\n- No scope changes from original ticket",
  "dates": {
    "created": "2026-01-20T14:13:51Z",
    "updated": "2026-01-20T14:13:51Z",
    "done": "2026-01-20T14:13:51Z"
  },
  "comments": [],
  "session": null
}
