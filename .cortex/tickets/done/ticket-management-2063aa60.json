{
  "id": "2063aa60-f76b-4191-bdd4-92715a02d4ec",
  "title": "Ticket Management",
  "body": "Implement the ticket file management layer for JSON-based ticket storage.\n\n## Context\n\nTickets are JSON files stored in `.cortex/tickets/{backlog,progress,done}/`. This package provides CRUD operations and is the foundation for MCP tools and daemon API.\n\nSee `DESIGN.md` for:\n- Ticket JSON schema (line 81-150)\n- Ticket lifecycle (line 74-79)\n- Status values (line 162-168)\n\n## Requirements\n\nCreate `internal/ticket/` package that supports:\n\n1. **Data structures** matching the JSON schema in DESIGN.md\n2. **CRUD operations**: Create, Read, Update, Delete tickets\n3. **List tickets** by status (backlog, progress, done)\n4. **Move tickets** between statuses\n5. **Session management** within tickets (add session, get active session)\n6. **Slug generation** from title (max 20 chars, per DESIGN.md line 154-159)\n\n## Verification\n\n```bash\nmake build   # Builds successfully\nmake test    # Tests pass\nmake lint    # No lint errors\n```\n\n## Notes\n\n- New tickets go to backlog\n- Moving to done should set `dates.approved`\n- Store should search all status folders when reading by ID\n- Include unit tests for ticket operations and store\n\n## Implementation\n\n### Commits\n\n- `f9ec5a5` feat: add ticket management package with JSON-based storage\n\n### Key Files\n\n| File | Purpose |\n|------|---------|\n| `internal/ticket/errors.go` | `NotFoundError`, `ValidationError` types and `IsNotFound()` helper |\n| `internal/ticket/slug.go` | `GenerateSlug()` - URL-friendly slugs (max 20 chars, word-boundary truncation) |\n| `internal/ticket/ticket.go` | Data structures: `Ticket`, `Session`, `Report`, `StatusEntry`, `Dates` |\n| `internal/ticket/store.go` | `Store` with CRUD + session management, file-based JSON storage |\n| `internal/ticket/*_test.go` | 24 tests covering all operations |\n\n### Decisions\n\n- Used `github.com/google/uuid` for ID generation\n- File naming: `{slug}-{shortID}.json` where shortID is first 8 chars of UUID\n- Status directories created on `NewStore()` initialization\n- `dates.approved` set automatically when moving ticket to done\n- Session status history appends on each update (full audit trail)",
  "dates": {
    "created": "2026-01-20T08:39:06Z",
    "updated": "2026-01-20T08:39:06Z",
    "done": "2026-01-20T08:39:06Z"
  },
  "comments": [],
  "session": null
}
