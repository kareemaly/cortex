{
  "id": "e88ccb00-5102-4ecf-b784-94629fca5733",
  "title": "Tmux Management",
  "body": "Implement tmux session and window management for agent sessions.\n\n## Context\n\nEach project has a tmux session. Each ticket gets a window within that session. The architect gets window 0.\n\nSee `DESIGN.md` for:\n- Tmux naming convention (lines 154-159)\n- Session types (lines 57-78)\n- Agent spawning examples (lines 356-378)\n\n## Requirements\n\nCreate `internal/tmux/` package that:\n\n1. **Session Management**\n   - Create session if not exists (named after project)\n   - Check if session exists\n   - Kill session\n\n2. **Window Management**\n   - Create window with name (slugified ticket title, max 20 chars)\n   - Window 0 reserved for architect\n   - Focus/attach to window\n   - Kill window\n   - Check if window exists\n\n3. **Command Execution**\n   - Run command in window (for spawning agents)\n   - Send keys to window\n\n4. **Utilities**\n   - List windows in session\n   - Get active window\n\n## Verification\n\n```bash\nmake build   # Builds successfully\nmake test    # Tests pass (may need integration tests with tmux)\nmake lint    # No lint errors\n```\n\n## Notes\n\n- Use `os/exec` to shell out to tmux commands\n- Handle cases where tmux isn't installed gracefully\n- Window names should match ticket slugs for easy identification\n- Tests may need to be skipped in CI if tmux unavailable\n\n## Implementation\n\n### Commits Pushed\n- `cb659e5` feat: add tmux session and window management package\n- `e7aa603` Merge branch 'ticket/2026-01-19-tmux-management'\n\n### Key Files Changed\n- `internal/tmux/errors.go` - Custom error types (NotInstalledError, SessionNotFoundError, WindowNotFoundError, CommandError)\n- `internal/tmux/tmux.go` - Manager struct with NewManager() and Available()\n- `internal/tmux/session.go` - Session management (SessionExists, CreateSession, KillSession, AttachSession)\n- `internal/tmux/window.go` - Window management (CreateWindow, CreateArchitectWindow, KillWindow, FocusWindow, ListWindows, GetWindowByName)\n- `internal/tmux/command.go` - Command execution (RunCommand, SendKeys, SpawnAgent, SpawnArchitect)\n- `internal/tmux/tmux_test.go` - Unit tests for error types and constants\n- `internal/tmux/integration_test.go` - Integration tests with `//go:build integration` tag\n\n### Important Decisions\n- Manager struct holds tmux binary path, returned by NewManager() which fails with NotInstalledError if tmux unavailable\n- CreateSession is idempotent (no-op if session exists)\n- Window operations use `session:window` target format\n- Integration tests use build tag and skip in CI via environment variable check\n- SpawnAgent/SpawnArchitect are high-level helpers that create session if needed, create window, and run command\n\n### Scope Changes\nNone - implementation matches original ticket requirements",
  "dates": {
    "created": "2026-01-20T13:06:54Z",
    "updated": "2026-01-20T13:06:54Z",
    "done": "2026-01-20T13:06:54Z"
  },
  "comments": [],
  "session": null
}
