{
  "id": "cb48cd87-fd4c-419b-a8e5-14d960da9868",
  "title": "Fix Install Prompts",
  "body": "## Context\n\nEarly development, no users. Breaking changes are fine. Do not accumulate tech debt.\n\n## Problem\n\n`cortex install` creates legacy prompt files instead of the new v2 prompt structure.\n\n**Current (wrong):**\n- `architect.md`\n- `ticket-agent.md`\n\n**Should be:**\n- `architect.md`\n- `ticket-system.md` - MCP tool instructions (appended to system prompt)\n- `ticket.md` - Non-worktree ticket prompt\n- `ticket-worktree.md` - Worktree ticket prompt\n- `approve.md` - Non-worktree approve prompt\n- `approve-worktree.md` - Worktree approve prompt\n\nAlso missing `tickets/review` folder.\n\n## Requirements\n\n- Update `internal/install/` to create the 5 new prompt files\n- Remove legacy `ticket-agent.md` creation\n- Add `tickets/review` folder creation\n\nAnother ticket please also work on\n\n# Remove Install Project Parameter\n\n## Context\n\nEarly development, no users. Breaking changes are fine. Do not accumulate tech debt.\n\n## Problem\n\n`cortex install` has a `--project` parameter but it should always run from inside a project folder. The parameter is unnecessary.\n\nAlso there may be test failures or error messages that reference `cortex install --project ...` which need updating.\n\n## Requirements\n\n- Remove `--project` flag from `cortex install` command\n- Install always uses current working directory as project path\n- Update any error messages, tests, or docs that reference `--project`\n\n## Implementation\n\n### Commits\n- `b65f5a9` fix: remove legacy ticket-agent.md support and --project flag references\n\n### Key Files Changed\n- `internal/install/install.go` - Removed `defaultTicketAgentPrompt` constant and legacy file creation\n- `internal/prompt/prompt.go` - Deleted deprecated `TicketAgentPath` function\n- `internal/prompt/errors.go` - Updated error message from `cortex install --project` to `cortex install`\n- `internal/core/spawn/spawn.go` - Removed fallback logic to legacy `ticket-agent.md`\n- `internal/prompt/prompt_test.go` - Removed `TestTicketAgentPath` test, updated error message assertion\n- `internal/core/spawn/spawn_test.go` - Updated test setup to use `ticket-system.md`\n- `internal/daemon/mcp/tools_test.go` - Updated test setup to use `ticket-system.md`\n\n### Decisions\n- The install already creates all 6 v2 prompt files correctly; only needed to remove the legacy `ticket-agent.md` creation\n- The `--project` flag doesn't exist in the current CLI implementation; only needed to update error messages and tests that still referenced it\n- The `tickets/review/` folder was already being created in `setupProject`\n\n### Scope\n- Narrower than original ticket: Install was already creating v2 prompts, just had legacy code that also created `ticket-agent.md`\n- The `--project` flag removal was already done; this ticket cleaned up remaining references",
  "dates": {
    "created": "2026-01-24T15:41:03Z",
    "updated": "2026-01-24T15:41:03Z",
    "done": "2026-01-24T15:41:03Z"
  },
  "comments": [],
  "session": null
}
