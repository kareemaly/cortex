{
  "id": "026cc665-e9ed-48d8-878c-807b7b47165e",
  "title": "Redesign Kanban Ticket Card Layout",
  "body": "## Problem\n\nThe current ticket card layout in the Kanban TUI has two issues:\n\n1. **Agent status steals title space** — The agent prefix (`● TodoWrit `) on the first line of the title consumes ~12 characters, pushing title words to overflow lines. The title width is `column_width - 6`, but the agent prefix takes additional space only on line 1, causing uneven wrapping.\n\n2. **Focused state hides agent status** — When a ticket is focused/selected, the agent status icon and tool name disappear entirely, replaced by just `\u003e `. The user loses visibility into what the agent is doing.\n\n## Solution\n\nMove the agent status (icon + tool name) from the title's first-line prefix to the bottom metadata line, alongside the date. Use a `·` separator between them.\n\n### Before (current)\n```\n● TodoWrit Split agent_args\n  into\n  Architect and Ticket\n  Session Args\n  Jan 27\n```\n\n### After (redesign)\n```\n  Split agent_args into\n  Architect and Ticket\n  Session Args\n  ● TodoWrit · Jan 27\n```\n\n### Focused state (after)\n```\n\u003e Split agent_args into\n  Architect and Ticket\n  Session Args\n  ● TodoWrit · Jan 27\n```\n\n## Scope\n\n- **`internal/cli/tui/kanban/column.go`** — Main changes:\n  - Remove agent status from the title first-line prefix in both selected and unselected states\n  - Move agent status rendering to the date/metadata line\n  - Format as `● ToolName · Jan 27` when there's an active session, plain `Jan 27` otherwise\n  - Keep `\u003e ` prefix for focused state on title line 1\n  - Keep `● ` (icon only, no tool) or `  ` for unselected title line 1 prefix\n\n- **`internal/cli/tui/kanban/styles.go`** — May need a style for the combined metadata line\n\n## Acceptance Criteria\n\n- [ ] Agent status (icon + tool) renders on the bottom metadata line next to the date\n- [ ] Title gets full width on all lines (no agent tool name stealing space)\n- [ ] Focused/selected ticket still shows agent status on the metadata line\n- [ ] Tickets without active sessions show just the date on the metadata line\n- [ ] No regression in scroll indicators, column layout, or ticket height",
  "dates": {
    "created": "2026-01-27T09:32:43.466033Z",
    "updated": "2026-01-27T09:45:51.603861Z",
    "progress": "2026-01-27T09:41:41.021646Z",
    "reviewed": "2026-01-27T09:45:10.117837Z",
    "done": "2026-01-27T09:45:51.603861Z"
  },
  "comments": [
    {
      "id": "8c867218-0607-4a6e-a470-f2b4533b0b90",
      "session_id": "84bfca8c-e7a5-44b4-9f04-345702e0be2b",
      "type": "ticket_done",
      "content": "## Summary\n\nRedesigned the kanban ticket card layout to move agent status (icon + tool name) from the title's first-line prefix to the bottom metadata line. This fixes two issues: agent status stealing ~12 characters of title width on line 1, and agent status disappearing entirely in the focused/selected state.\n\n## Changes Made\n\n### `internal/cli/tui/kanban/column.go` (1 file, +32/-18 lines)\n\n1. **Replaced `formatAgentStatus` with two focused functions:**\n   - `agentStatusIcon(t)` — returns the bare icon character (●, ▶, ○, ⏸, ✗) based on agent status\n   - `agentStatusLabel(t)` — returns icon + truncated tool name as unstyled text for the metadata line\n\n2. **Title prefix (unselected, active session):** Changed from `● TodoWrit ` (icon + tool) to just `● ` (icon only via `activeSessionStyle`), freeing the full column width for title text on all lines.\n\n3. **Title prefix (selected):** Kept `\u003e ` on line 1, `  ` on subsequent lines — no change.\n\n4. **Metadata/date line:** Now renders agent status alongside the date when there's an active session:\n   - Unselected: `● TodoWrit · Jan 27` (agent part in `activeSessionStyle`, rest in `ticketDateStyle`)\n   - Selected: `● TodoWrit · Jan 27` (entire line in `selectedTicketStyle`)\n   - No active session: `Jan 27` (unchanged behavior)\n\n## Key Decisions\n\n- **No changes to `styles.go`:** Existing styles (`activeSessionStyle`, `ticketDateStyle`, `selectedTicketStyle`) were sufficient for the new layout. No new styles needed.\n- **Icon-only prefix on title line 1:** Kept the status icon (`●`) as a visual indicator on unselected tickets with active sessions, per the ticket scope. This preserves at-a-glance visibility of which tickets have agents without consuming title space for the tool name.\n- **Unstyled label composition:** `agentStatusLabel` returns unstyled text so the caller controls styling — `activeSessionStyle` for unselected, inherited `selectedTicketStyle` for selected state.\n\n## Verification\n\n- `make build` — passes\n- `make lint` — 0 issues\n- `make test` — all unit tests pass\n\n## Files Modified\n\n- `internal/cli/tui/kanban/column.go`\n\n## Follow-up Notes\n\nNone — all acceptance criteria met.",
      "created_at": "2026-01-27T09:45:51.602908Z"
    }
  ],
  "session": {
    "id": "84bfca8c-e7a5-44b4-9f04-345702e0be2b",
    "started_at": "2026-01-27T09:41:40.98472Z",
    "ended_at": "2026-01-27T09:45:51.603447Z",
    "agent": "claude",
    "tmux_window": "redesign-kanban-ticket-card-layout",
    "worktree_path": "/Users/kareemelbahrawy/.cortex/worktrees/6c48261b-c157-4119-918b-45518f361a9b",
    "feature_branch": "ticket/redesign-kanban",
    "current_status": {
      "status": "in_progress",
      "tool": "Bash",
      "work": null,
      "at": "2026-01-27T09:45:35.850235Z"
    },
    "status_history": [
      {
        "status": "starting",
        "tool": null,
        "work": null,
        "at": "2026-01-27T09:41:40.98472Z"
      },
      {
        "status": "in_progress",
        "tool": "mcp__cortex__readTicket",
        "work": null,
        "at": "2026-01-27T09:41:49.174734Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-01-27T09:41:49.234082Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-01-27T09:41:49.236292Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-01-27T09:43:30.708524Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-01-27T09:43:35.409476Z"
      },
      {
        "status": "in_progress",
        "tool": "Edit",
        "work": null,
        "at": "2026-01-27T09:43:46.162984Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-01-27T09:43:50.833039Z"
      },
      {
        "status": "in_progress",
        "tool": "Edit",
        "work": null,
        "at": "2026-01-27T09:44:03.727724Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-01-27T09:44:07.674817Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-01-27T09:44:13.088909Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:44:22.015359Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:44:27.012009Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:44:34.573102Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-01-27T09:44:40.025526Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:44:45.644282Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:44:45.660628Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:44:53.631542Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-01-27T09:44:57.869831Z"
      },
      {
        "status": "in_progress",
        "tool": "mcp__cortex__requestReview",
        "work": null,
        "at": "2026-01-27T09:45:10.152223Z"
      },
      {
        "status": "idle",
        "tool": null,
        "work": null,
        "at": "2026-01-27T09:45:16.845078Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:45:32.318913Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-01-27T09:45:35.850235Z"
      }
    ],
    "requested_reviews": [
      {
        "repo_path": "/Users/kareemelbahrawy/.cortex/worktrees/6c48261b-c157-4119-918b-45518f361a9b",
        "summary": "Redesigned kanban ticket card layout to move agent status from the title's first-line prefix to the bottom metadata line.\n\n**Changes in `internal/cli/tui/kanban/column.go`:**\n\n1. **Replaced `formatAgentStatus`** with two focused functions:\n   - `agentStatusIcon(t)` — returns just the status icon character (●, ▶, ○, ⏸, ✗)\n   - `agentStatusLabel(t)` — returns icon + truncated tool name (unstyled)\n\n2. **Title prefix** — Unselected tickets with active sessions now show only the icon (`● `) on line 1 instead of icon + tool name (`● TodoWrit `). Selected tickets keep `\u003e ` prefix. This gives the title full width on all lines.\n\n3. **Metadata line** — The bottom date line now includes agent status when there's an active session, formatted as `● TodoWrit · Jan 27`. Without an active session, it remains plain `Jan 27`. Both selected and unselected states show agent status on this line.\n\n**No changes needed in `styles.go`** — existing styles (`activeSessionStyle`, `ticketDateStyle`, `selectedTicketStyle`) were sufficient.\n\nBuild, lint (0 issues), and all unit tests pass.",
        "requested_at": "2026-01-27T09:45:10.117199Z"
      }
    ]
  }
}