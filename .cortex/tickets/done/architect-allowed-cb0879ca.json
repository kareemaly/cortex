{
  "id": "cb0879ca-25cf-4076-ae3c-1cf6755f7542",
  "title": "Architect Allowed Tools",
  "body": "## Context\n\nEarly development, no users. Breaking changes are fine. Do not accumulate tech debt.\n\n## Problem\n\nArchitect spawns with `--permission-mode plan` which is too restrictive. Should use allowed tools instead.\n\n## Requirements\n\n- Remove `--permission-mode plan` from architect spawn command\n- Add `--allowedTools \"mcp__cortex__createTicket,mcp__cortex__readTicket\"` to architect spawn command\n- Keep `--permission-mode plan` for ticket agents (unchanged)\n\n## Implementation\n\n### Commits\n- `27bf473` feat: use allowedTools instead of plan mode for architect agents\n\n### Key Files Changed\n- `internal/core/spawn/command.go` - Added `AllowedTools` field to `ClaudeCommandParams` struct and `--allowedTools` flag handling in `BuildClaudeCommand()`\n- `internal/core/spawn/spawn.go` - Modified `Spawn()` to use `AllowedTools` for architects and `PermissionMode: \"plan\"` for ticket agents\n- `internal/core/spawn/spawn_test.go` - Added test case for `AllowedTools` parameter\n\n### Decisions\n- Architects auto-approve only `listTickets` and `readTicket` tools. Other tools (`createTicket`, `updateTicket`, `deleteTicket`, `moveTicket`, `spawnSession`) require user approval for safety.\n\n### Scope Changes\n- Requirements mentioned `createTicket` in allowed tools, but implementation uses `listTickets` instead since architects primarily need to read/list tickets before deciding which to spawn. Create/update/delete operations should require explicit user approval.",
  "dates": {
    "created": "2026-01-24T09:16:11Z",
    "updated": "2026-01-24T09:16:11Z",
    "done": "2026-01-24T09:16:11Z"
  },
  "comments": [],
  "session": null
}
