{
  "id": "f3f89a3f-eddb-4c6d-aa7b-17eda9acc9e6",
  "title": "Architect Tools Cleanup",
  "body": "Simplify architect MCP tools and fix spawnSession behavior.\n\n## Changes\n\n### 1. spawnSession should NOT auto-move ticket\nCurrently `spawnSession` moves ticket from backlog to progress. Remove this - the spawned agent should call `moveTicketToProgress` themselves.\n\n### 2. Merge listTickets and searchTickets\nConsolidate into single `listTickets` tool with optional filters:\n- `status` - filter by backlog/progress/review/done\n- `query` - search title/body text\n\n### 3. Remove getSessionStatus\n`readTicket` already returns full ticket with sessions. No need for separate tool.\n\n## Final Architect Tools (7)\n\n| Tool | Input |\n|------|-------|\n| `listTickets` | `status?`, `query?` |\n| `readTicket` | `id` |\n| `createTicket` | `title`, `body?` |\n| `updateTicket` | `id`, `title?`, `body?` |\n| `deleteTicket` | `id` |\n| `moveTicket` | `id`, `status` |\n| `spawnSession` | `ticket_id`, `agent?` |\n\n## Files Affected\n\n- `~/projects/cortex1/internal/daemon/mcp/tools_architect.go`\n- `~/projects/cortex1/internal/daemon/mcp/types.go`\n\n## Implementation\n\n### Commits Pushed\n- `452d219` refactor: simplify architect MCP tools from 9 to 7\n\n### Key Files Changed\n| File | Changes |\n|------|---------|\n| `internal/daemon/mcp/types.go` | Added `Query` field to `ListTicketsInput`, deleted `SearchTicketsInput`, `GetSessionStatusInput`, `GetSessionStatusOutput` |\n| `internal/daemon/mcp/tools_architect.go` | Updated `listTickets` with query filter, removed `searchTickets` and `getSessionStatus` tools, removed auto-move from `spawnSession` |\n| `internal/daemon/mcp/tools_test.go` | Replaced search/getSessionStatus tests with new query filter tests and `TestHandleSpawnSessionNoAutoMove` |\n| `internal/daemon/mcp/integration_test.go` | Replaced search tests with `TestIntegration_ListTickets_WithQuery` and `TestIntegration_ListTickets_WithStatusAndQuery` |\n| `cmd/cortex/commands/architect.go` | Updated architect prompt to reflect new 7-tool set |\n| `CLAUDE.md` | Updated MCP tools documentation |\n\n### Important Decisions\n- Empty query returns all tickets (unlike old `searchTickets` which errored on empty query)\n- Removed date filter support from merged `listTickets` (was in `searchTickets` but rarely used)\n- `spawnSession` no longer auto-moves ticket - spawned agent should call `pickupTicket` to move to progress\n\n### Scope Changes\n- None - implemented as specified in original ticket",
  "dates": {
    "created": "2026-01-22T11:17:15Z",
    "updated": "2026-01-22T11:17:15Z",
    "done": "2026-01-22T11:17:15Z"
  },
  "comments": [],
  "session": null
}
