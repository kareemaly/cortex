{
  "id": "172522e7-094b-4ca6-bcab-171798bd8d74",
  "title": "Consolidate Response Types",
  "body": "## Context\n\nEarly development, no users. Breaking changes are fine. Do not accumulate tech debt.\n\n## Problem\n\nSame response types are defined 3 times across different packages:\n\n- `internal/cli/sdk/client.go` - SDK response types\n- `internal/daemon/api/types.go` - API response types\n- `internal/daemon/mcp/types.go` - MCP output types\n\nDuplicated types include:\n- `TicketSummary` (3 copies)\n- `DatesResponse/DatesOutput` (3 copies)\n- `CommentResponse/CommentOutput` (3 copies)\n- `SessionResponse/SessionOutput` (3 copies)\n- `StatusEntryResponse/StatusOutput` (3 copies)\n\nAlso, conversion functions `toTicketResponse()` and `ToTicketOutput()` do nearly identical work.\n\n## Requirements\n\n- Create shared types package (e.g., `internal/types/`)\n- Define canonical response types once\n- Update SDK, API, and MCP packages to use shared types\n- Consolidate conversion functions\n\n## Implementation\n\n### Commits\n\n- `b1a14fe` refactor: consolidate response types into internal/types package\n\n### Key Files Changed\n\n**Created:**\n- `internal/types/response.go` - 13 shared response types\n- `internal/types/convert.go` - 7 shared conversion helpers\n\n**Modified:**\n- `internal/daemon/api/types.go` - Type aliases for shared types, kept request types + SpawnResponse\n- `internal/cli/sdk/client.go` - Type aliases for shared types, kept HealthResponse + APIError\n- `internal/daemon/mcp/types.go` - Type aliases for identical types, kept MCP-specific types\n- `internal/daemon/api/tickets.go` - Updated to use `types.ToTicketResponse()` and `types.ToSessionResponse()`\n\n### Decisions\n\n1. **Type aliases over imports** - Used Go type aliases (`type X = types.X`) in api and sdk packages to maintain backwards compatibility for consumers using `sdk.TicketSummary` etc.\n\n2. **MCP keeps some unique types** - MCP's `TicketSummary`, `SessionOutput`, and `TicketOutput` have structural differences (e.g., MCP has `IsActive` but no `StatusHistory`), so kept as separate types while using shared conversion helpers for common fields.\n\n3. **Shared conversion helpers** - Created `types.ToCommentResponse()`, `types.ToDatesResponse()`, etc. that MCP conversion functions now call internally.\n\n### Scope Changes\n\nNone - implemented as specified.",
  "dates": {
    "created": "2026-01-24T15:58:09Z",
    "updated": "2026-01-24T15:58:09Z",
    "done": "2026-01-24T15:58:09Z"
  },
  "comments": [],
  "session": null
}
