{
  "id": "43b4c7a0-2f51-4c70-bc01-43311ef07a63",
  "title": "Session End via MCP Restructure",
  "body": "## Context\n\nEarly development, no users, breaking changes acceptable, no tech debt.\n\n## Problem\n\n- `concludeSession` MCP tool shouldn't exist - agents shouldn't end their own sessions\n- `moveTicketToDone` needs to capture completion summary\n\n## Changes\n\n- Remove `concludeSession` from ticket MCP tools\n- Add `ticket_done` comment type\n- Update `moveTicketToDone` to accept optional summary, add as `ticket_done` comment\n- Remove deprecated MCP tools (`pickupTicket`, `submitReport`, `approve`)\n\n## Verification\n\n```bash\nmake lint\nmake test\nmake build\nmake test-integration\n```\n\n## Implementation\n\n### Commits\n- `b1818d4` refactor: remove deprecated MCP tools, add summary support to moveTicketToDone\n\n### Key Files Changed\n- `internal/ticket/ticket.go` - Added `CommentTicketDone` type\n- `internal/daemon/mcp/types.go` - Added `MoveTicketToDoneInput`, removed deprecated input/output types\n- `internal/daemon/mcp/tools_ticket.go` - Updated `moveTicketToDone` handler, removed deprecated tools\n- `internal/daemon/mcp/server.go` - Removed unused `killSessionWindow` function\n- `internal/daemon/mcp/tools_test.go` - Updated tests, added `TestHandleMoveTicketToDone_WithSummary`\n\n### Decisions\n- Summary provided to `moveTicketToDone` is stored as `ticket_done` comment type (not `progress`)\n- Removed all deprecated tools in single commit since no backward compatibility needed\n- Cleaned up unused `killSessionWindow` function that was only used by removed handlers",
  "dates": {
    "created": "2026-01-23T13:50:50Z",
    "updated": "2026-01-23T13:50:50Z",
    "done": "2026-01-23T13:50:50Z"
  },
  "comments": [],
  "session": null
}
