{
  "id": "9fb2da4f-7858-4733-9151-9da6f06efe1c",
  "title": "Cortex Install Command",
  "body": "Implement the `cortex install` command for initial setup.\n\n## Context\n\nThe install command bootstraps the cortex environment - creating directories, config files, and optionally setting up the current project.\n\nSee `DESIGN.md` for:\n- Global directory structure (lines 20-22)\n- Project directory structure (lines 24-29)\n- Global config (lines 32-40)\n- Project config (lines 272-293)\n- CLI command (line 52)\n\n## Requirements\n\nImplement `cortex install` command that:\n\n1. **Global Setup**\n   - Create `~/.cortex/` directory if not exists\n   - Create `~/.cortex/settings.yaml` with defaults if not exists\n   - Ensure `~/.cortex/tickets/` directories exist (backlog, progress, done)\n\n2. **Project Setup** (optional, with flag or prompt)\n   - Create `.cortex/` in current directory\n   - Create `.cortex/cortex.yaml` with sensible defaults\n   - Create `.cortex/tickets/{backlog,progress,done}/` directories\n   - Auto-detect project name from directory or git remote\n\n3. **Verification**\n   - Check if tmux is installed (warn if not)\n   - Check if claude CLI is installed (warn if not)\n   - Check if git is installed (warn if not)\n\n4. **Idempotent**\n   - Safe to run multiple times\n   - Don't overwrite existing config files\n   - Report what was created vs already existed\n\n## Verification\n\n```bash\nmake build\nmake lint\nmake test\n\n# Manual test\nrm -rf ~/.cortex  # Clean slate\ncortex install    # Should create global setup\ncd /some/project\ncortex install --project  # Should create project setup\n```\n\n## Notes\n\n- Keep it simple - no fancy wizard needed\n- Use sensible defaults that work out of box\n- Consider --force flag to overwrite existing configs\n- Print clear messages about what was created\n\n## Implementation\n\n### Commits Pushed\n\n- `e185266` feat: implement cortex install command\n\n### Key Files Changed\n\n**New files:**\n- `internal/install/result.go` - Result types (`ItemStatus`, `SetupItem`, `DependencyResult`, `Result`)\n- `internal/install/deps.go` - Dependency checking via `exec.LookPath` for tmux, claude, git\n- `internal/install/detect.go` - Project name detection from git remote origin or directory name\n- `internal/install/install.go` - Core installation logic with `Run()`, `setupGlobal()`, `setupProject()`\n\n**Modified files:**\n- `cmd/cortex/commands/install.go` - Wired up command with `--project` and `--force` flags\n- `internal/daemon/config/config.go` - Added `StatusHistoryLimit` and `GitDiffTool` fields per DESIGN.md\n\n### Important Decisions\n\n1. **Separate package** - Core logic in `internal/install/` for testability and reusability\n2. **No prompts** - Pure flag-based interface (`--project`, `--force`) for simplicity and scriptability\n3. **Git detection** - Extract repo name from `git remote get-url origin`, fallback to directory name\n4. **Idempotent** - Uses `os.Stat` to check existence before creation; directories show \"already exists\", configs only overwritten with `--force`\n\n### Scope Changes\n\nNone - implemented as specified in the ticket",
  "dates": {
    "created": "2026-01-20T15:47:57Z",
    "updated": "2026-01-20T15:47:57Z",
    "done": "2026-01-20T15:47:57Z"
  },
  "comments": [],
  "session": null
}
