{
  "id": "c8b0fba1-57b6-49f0-8c76-2b431732e518",
  "title": "Spawn Error Handling",
  "body": "## Context\n\nEarly development, no users. Breaking changes are fine. Do not accumulate tech debt.\n\n## Problem\n\n1. **Cleanup errors silently ignored** - `internal/core/spawn/spawn.go` cleanup operations use `_ = operation()` without logging:\n   ```go\n   _ = wm.Remove(*worktreePath, *featureBranch)\n   _ = RemoveMCPConfig(mcpConfigPath)\n   _ = RemoveSettingsConfig(settingsPath)\n   ```\n   These appear at lines 165, 301, 321, 322, 343, 530, 533, 540.\n\n2. **Missing validation** - `validateSpawnRequest()` doesn't check:\n   - `ProjectPath` exists on filesystem\n   - `TmuxSession` contains valid characters\n\n## Requirements\n\n- Log cleanup errors as warnings instead of silently ignoring\n- Add ProjectPath existence validation\n- Add TmuxSession name validation\n\n## Implementation\n\n### Commits\n\n- `9a416a3` feat: improve spawn error handling and input validation\n- `f6d65f3` Merge branch 'ticket/2026-01-24-spawn-error-handling'\n\n### Key Files Changed\n\n- `internal/core/spawn/spawn.go` - Added Logger to Dependencies, logWarn helper, cleanup error logging, and input validations\n- `internal/core/spawn/spawn_test.go` - Added tests for validateTmuxName and ProjectPath validation\n- `internal/daemon/api/tickets.go` - Pass logger to spawner\n- `internal/daemon/mcp/server.go` - Added Logger field to Config struct\n- `internal/daemon/mcp/tools_architect.go` - Pass logger to spawner\n\n### Decisions\n\n- Used nil-safe `logWarn()` helper method to avoid nil pointer issues when Logger is not provided\n- TmuxSession validation rules: max 128 chars, no leading hyphen, no colons/periods (tmux delimiters), alphanumeric/underscores/hyphens only\n- ProjectPath validation only checks existence when path is non-empty (empty path is allowed for some use cases)",
  "dates": {
    "created": "2026-01-24T15:55:41Z",
    "updated": "2026-01-24T15:55:41Z",
    "done": "2026-01-24T15:55:41Z"
  },
  "comments": [],
  "session": null
}
