{
  "id": "d4015bd8-5e03-4127-be0f-d3cdc5cbf26f",
  "type": "work",
  "title": "Add cortex config show CLI Command",
  "body": "## Summary\n\nAdd a `cortex config show` CLI command that displays the fully resolved project configuration after all extends are merged. This helps users verify their config is correct and debug inheritance issues.\n\n## Context\n\nUsers extending base configs (e.g., `extend: ~/.cortex/defaults/claude-code`) have no way to verify the final merged result. When ticket agents don't start with expected args (like plan mode), there's no visibility into whether the merge happened correctly.\n\n## Requirements\n\n### CLI Command\n- `cortex config show` — displays resolved config for current project\n- `cortex config show --path /some/project` — displays resolved config for specified project\n- Output should be valid YAML that could be copy-pasted into a config file\n\n### Output Format\n```yaml\n# Resolved config for: /path/to/project\n# Extended from: ~/.cortex/defaults/claude-code\n\nname: project-name\narchitect:\n  agent: claude\n  args:\n    - \"--allowedTools\"\n    - \"mcp__cortex__listTickets,mcp__cortex__readTicket\"\nticket:\n  work:\n    agent: claude\n    args:\n      - \"--permission-mode\"\n      - \"plan\"\ngit:\n  worktrees: false\n```\n\n### Implementation\n- Use existing `projectconfig.Load()` which already handles extend resolution and merging\n- Add comment header showing source path and extend chain\n- Handle errors gracefully (missing config, invalid extend path, etc.)\n\n## Acceptance Criteria\n- [ ] `cortex config show` works in a project directory\n- [ ] `cortex config show --path` works with explicit path\n- [ ] Output shows fully merged config with all extends resolved\n- [ ] Comment header shows extend chain for debugging\n- [ ] Errors display helpful messages (no config found, extend path invalid, etc.)",
  "dates": {
    "created": "2026-02-02T11:35:57.316496Z",
    "updated": "2026-02-02T11:45:32.71446Z",
    "progress": "2026-02-02T11:36:09.232924Z",
    "reviewed": "2026-02-02T11:44:08.886799Z",
    "done": "2026-02-02T11:45:32.71446Z"
  },
  "comments": [
    {
      "id": "b4a34024-f4b4-43a8-85b6-58e2ba61902b",
      "session_id": "594da3f7-efdf-46e8-8d94-239bdd2950d3",
      "type": "review_requested",
      "content": "## Summary\n\nAdded `cortex config show` CLI command that displays the fully resolved project configuration after all extends are merged.\n\n## Changes\n\n### New Files\n- `cmd/cortex/commands/config.go` - Parent `config` command\n- `cmd/cortex/commands/config_show.go` - `config show` subcommand implementation\n\n### Features Implemented\n1. **`cortex config show`** - Displays resolved config for current project\n2. **`cortex config show --path /some/project`** - Displays resolved config for specified project\n3. **Comment header** showing project root and extend chain (when applicable)\n4. **Valid YAML output** that could be copy-pasted into a config file\n5. **Helpful error messages** for common issues:\n   - No cortex project found (suggests running `cortex init`)\n   - Extend path not found\n   - Circular extend reference\n   - Config parse errors\n\n### Example Output\n```yaml\n# Resolved config for: /Users/user/projects/myapp\n# Extended from: ~/.cortex/defaults/claude-code\n\nname: myapp\narchitect:\n    agent: claude\n    args:\n        - --verbose\nticket:\n    work:\n        agent: claude\ngit:\n    worktrees: false\n```\n\n## Testing\n- Build passes: `make build`\n- Lint passes: `make lint` (0 issues)\n- All existing tests pass: `go test ./...`\n- Manual testing verified:\n  - Works in project directory\n  - Works with `--path` flag\n  - Proper error handling for missing projects\n  - Comment header shows extend path when configured\n\n## Note\nDuring implementation, I discovered an existing issue: the extend functionality expects base configs at `path/.cortex/cortex.yaml`, but the installed defaults at `~/.cortex/defaults/claude-code/` have `cortex.yaml` directly (no `.cortex` subdirectory). This causes extends to fall back to defaults. This is a pre-existing bug in the config loading, not introduced by this change. The `config show` command correctly displays whatever the config loader returns.",
      "action": {
        "type": "git_diff",
        "args": {
          "repo_path": "/Users/kareemelbahrawy/projects/cortex1"
        }
      },
      "created_at": "2026-02-02T11:44:08.885701Z"
    },
    {
      "id": "6b50e031-17cc-4ffd-a2a9-10076a3ac171",
      "session_id": "594da3f7-efdf-46e8-8d94-239bdd2950d3",
      "type": "done",
      "content": "## Summary\n\nImplemented `cortex config show` CLI command that displays the fully resolved project configuration after all extends are merged.\n\n## Files Created\n- `cmd/cortex/commands/config.go` - Parent `config` command structure\n- `cmd/cortex/commands/config_show.go` - Show subcommand with `--path` flag support\n\n## Features\n- `cortex config show` - displays resolved config for current project\n- `cortex config show --path /some/project` - displays config for specified path\n- Comment header showing project root and extend chain (when applicable)\n- Valid YAML output suitable for copy-paste into config files\n- Helpful error messages for missing projects, invalid extend paths, circular references, and parse errors\n\n## Commit\n`cc86b14` - feat(cli): add cortex config show command\n\n## Note\nDiscovered pre-existing bug: extend functionality expects `.cortex/cortex.yaml` in base config paths, but installed defaults at `~/.cortex/defaults/claude-code/` have `cortex.yaml` directly. This is a separate issue to address.",
      "created_at": "2026-02-02T11:45:32.712962Z"
    }
  ],
  "session": {
    "id": "594da3f7-efdf-46e8-8d94-239bdd2950d3",
    "started_at": "2026-02-02T11:36:09.180699Z",
    "ended_at": "2026-02-02T11:45:32.7138Z",
    "agent": "claude",
    "tmux_window": "add-cortex-config-show-cli-command",
    "current_status": {
      "status": "waiting_permission",
      "tool": null,
      "work": null,
      "at": "2026-02-02T11:45:30.838412Z"
    },
    "status_history": [
      {
        "status": "starting",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:36:09.180699Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-02-02T11:36:20.60221Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:26.202402Z"
      },
      {
        "status": "in_progress",
        "tool": "Glob",
        "work": null,
        "at": "2026-02-02T11:36:26.549752Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:32.273339Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:32.274319Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:32.275754Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:39.262248Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:39.262985Z"
      },
      {
        "status": "in_progress",
        "tool": "Grep",
        "work": null,
        "at": "2026-02-02T11:36:44.879503Z"
      },
      {
        "status": "in_progress",
        "tool": "Glob",
        "work": null,
        "at": "2026-02-02T11:36:45.011044Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:53.363851Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-02-02T11:36:53.429437Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:36:59.310879Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:37:03.278814Z"
      },
      {
        "status": "in_progress",
        "tool": "Glob",
        "work": null,
        "at": "2026-02-02T11:37:11.341531Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:37:14.787083Z"
      },
      {
        "status": "in_progress",
        "tool": "Glob",
        "work": null,
        "at": "2026-02-02T11:37:18.717281Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:37:21.859129Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-02-02T11:37:28.498222Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:37:32.473852Z"
      },
      {
        "status": "in_progress",
        "tool": "Write",
        "work": null,
        "at": "2026-02-02T11:39:35.508445Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-02-02T11:39:40.7277Z"
      },
      {
        "status": "in_progress",
        "tool": "Write",
        "work": null,
        "at": "2026-02-02T11:40:00.770785Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-02-02T11:40:07.345291Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:40:12.116889Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:40:22.391834Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:40:26.383217Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:40:30.092295Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:40:34.50955Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:40:36.349324Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:40:40.841633Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:40:42.460546Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:40:52.120444Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:41:00.267585Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:41:27.50903Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:41:32.09943Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:41:37.246608Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:41:48.989184Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:41:50.114796Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:41:56.52548Z"
      },
      {
        "status": "in_progress",
        "tool": "Glob",
        "work": null,
        "at": "2026-02-02T11:42:06.008084Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:42:09.98976Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:42:26.487224Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:42:34.615886Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:42:43.839979Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:42:49.572905Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:42:53.211536Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:42:54.56519Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:42:58.818721Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:43:14.351173Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:43:19.544784Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:43:22.18197Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:43:28.296817Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:43:34.192379Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:43:37.484603Z"
      },
      {
        "status": "in_progress",
        "tool": "TodoWrite",
        "work": null,
        "at": "2026-02-02T11:43:47.369595Z"
      },
      {
        "status": "in_progress",
        "tool": "Read",
        "work": null,
        "at": "2026-02-02T11:43:50.794684Z"
      },
      {
        "status": "in_progress",
        "tool": "mcp__cortex__requestReview",
        "work": null,
        "at": "2026-02-02T11:44:08.925106Z"
      },
      {
        "status": "idle",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:44:15.338536Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:44:49.235916Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:44:54.983344Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:45:03.359191Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:45:08.151457Z"
      },
      {
        "status": "in_progress",
        "tool": "Bash",
        "work": null,
        "at": "2026-02-02T11:45:21.029855Z"
      },
      {
        "status": "waiting_permission",
        "tool": null,
        "work": null,
        "at": "2026-02-02T11:45:30.838412Z"
      }
    ]
  }
}